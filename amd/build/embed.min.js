define("tiny_ketcher/embed",["exports","core/str","core/templates","core/modal","core/config","core/notification"],(function(_exports,_str,_templates,_modal,_config,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Common values helper for the Moodle tiny_ketcher plugin.
   *
   * @module      tiny_ketcher/embed
   * @copyright   2024 Venkatesan Rangarajan <venkatesanrpu@gmail.com>
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.KetcherEmbed=void 0,_templates=_interopRequireDefault(_templates),_modal=_interopRequireDefault(_modal),_config=_interopRequireDefault(_config);_exports.KetcherEmbed=class{editor=null;canShowFilePicker=!1;helpStrings=null;isUpdating=!1;constructor(editor){this.editor=editor}getIframeURL=()=>new URL(`${_config.default.wwwroot}/lib/editor/tiny/plugins/ketcher/ketcher/sketch.html`).toString();init=async()=>{const modal=await _modal.default.create({title:(0,_str.get_string)("ketchertitle","tiny_ketcher"),show:!0,removeOnClose:!0});var modalDialog=document.querySelector(".modal-dialog"),modalContent=document.querySelector(".modal-content"),modalBody=document.querySelector(".modal-body"),modalFooter=document.querySelector(".modal-footer");window.matchMedia("(max-width: 768px)").matches?modalDialog.style.cssText="width: 90%; height: 90%; margin: 5% auto; padding: 0;":modalDialog.style.cssText="width: 850px; height: 720px; margin: auto; padding: 0;",modalContent.style.cssText="height: 100%; max-height: 100%;",modalBody.style.cssText="padding: 0; height: calc(100% - 50px);",modalFooter.style.cssText="display: inherit; height: 50px;",_templates.default.renderForPromise("tiny_ketcher/ketcher_iframe",{src:this.getIframeURL()}).then((_ref=>{let{html:html,js:js}=_ref;_templates.default.appendNodeContents(modal.getBody(),html,js);const iframe=document.getElementById("tinymce_ketcher-iframe");iframe.addEventListener("load",(function(){window.ketData&&setTimeout((function(){iframe.contentWindow.ketcher?iframe.contentWindow.ketcher.setMolecule(window.ketData):window.console.log("ketcher is not defined")}),1e3)}));const scripturl=new URL(`${_config.default.wwwroot}/lib/editor/tiny/plugins/ketcher/ketcher/sketch.min.js`);var script=document.createElement("script");script.src=scripturl.toString();var button=document.createElement("button");button.id="actionButton",button.className="btn btn-primary",button.textContent="Save",modal.getFooter().append(button,script)})).catch((error=>(0,_notification.exception)(error))),delete window.ketdata}}}));

//# sourceMappingURL=embed.min.js.map